!function t(e,r,i){function s(o,a){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(n)return n(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return s(r?r:t)},c,c.exports,t,e,r,i)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,e,r){var i,s,n,o=function(t,e){return function(){return t.apply(e,arguments)}};s=t("./utils"),n=t("jade/component"),i=function(){function t(t,e){this.$el=t,this.options=null!=e?e:{},this.updateAverageStats=o(this.updateAverageStats,this),this.options.metrics||(this.options.metrics=["cpu","ram","swap","disk"]),this.metric=this.options.metrics[0],this.start=this._periods[0].start,this.stop=this._periods[0].stop,this.size=this.options.size||this._size,this.width=this.size,this.height=this.size,this.innerRadius=this.size/10,this.outerRadius=this.size/5,this.radius=this.innerRadius+this.outerRadius,this.$node=$(n({metrics:this.options.metrics,periods:this._periods})),this.$el.append(this.$node)}return t.prototype._size=250,t.prototype._points=96,t.prototype._periods=[{text:"24 hours",value:0,start:"25h",stop:"1h"},{text:"7 days",value:1,start:"168h",stop:"1h"},{text:"30 days",value:2,start:"720h",stop:"1h"}],t.prototype.build=function(){return this.svg=d3.select($(".component",this.$node).get(0)).append("svg:svg").attr({height:this.height,width:this.width}),this._buildGraph(),this._buildLegend(),this.$node.find(".metrics").change(function(t){return function(e){return t.metric=$(e.currentTarget).find("option:selected").val(),t._subscribeToHourlyData()}}(this)),this.$node.find(".periods").change(function(t){return function(e){var r,i;return r=$(e.currentTarget).find("option:selected").val(),i=[t._periods[r].start,t._periods[r].stop],t.start=i[0],t.stop=i[1],t._subscribeToHourlyData()}}(this)),this._subscribeToHourlyData()},t.prototype.updateAverageStats=function(t){var e,r;return e=this,r=2*Math.PI/this._points,this.slices=this.graph.selectAll("path").data(t),this.slices.enter().append("path").each(function(t,i){var s,n,o;return s=i+1,o=s*r,n=o+r,d3.select(this).attr({"class":"cool",d:d3.svg.arc().innerRadius(e.innerRadius).outerRadius(e.innerRadius+1).startAngle(o).endAngle(n)})}),this.slices.each(function(t,i){var n,o,a;return n=i+1,a=n*r,o=a+r,d3.select(this).transition().duration(250).delay(10*i).attr({"class":"fill-temp "+s.getTemperature(t.value),d:d3.svg.arc().innerRadius(e.innerRadius).outerRadius(e.innerRadius+e.outerRadius*t.value).startAngle(a).endAngle(o)})})},t.prototype._buildGraph=function(){return this.graph=this.svg.append("g").attr({transform:"translate("+this.width/2+", "+this.height/2+")"}),this.graph.append("svg:circle").attr({r:this.innerRadius,"class":"circle"}),this.graph.append("svg:circle").attr({r:this.radius*s.thresholds.cool.to,"class":"dash-circle stroke-temp cool"}),this.graph.append("svg:circle").attr({r:this.radius*s.thresholds.warm.to,"class":"dash-circle stroke-temp warm"}),this.graph.append("svg:circle").attr({r:this.radius*s.thresholds.hot.to,"class":"dash-circle stroke-temp hot"})},t.prototype._buildLegend=function(){var t,e,r,i;return t=this,r=s.getTimeArray(23,24),e=2*Math.PI/24,i=this.graph.selectAll("text").data(r),i.enter().append("text").text(function(t){return t.hour%3===0?""+t.hour+t.period:t.hour}).attr({"class":function(t){return t.hour%3===0?"primary":"secondary"},x:function(r,i){return 1.75*t.outerRadius*Math.sin(e*i)},y:function(r,i){return 1.75*-t.outerRadius*Math.cos(e*i)}})},t.prototype._subscribeToHourlyData=function(){return PubSub.publish("STATS.SUBSCRIBE.HOURLY_AVERAGE",{start:this.start,stop:this.stop,entity:this.options.entity,entityId:this.options.entityId,metric:this.metric,callback:this.updateAverageStats})},t}(),window.nanobox||(window.nanobox={}),nanobox.HourlyAverage=i},{"./utils":2,"jade/component":3}],2:[function(t,e,r){var i;e.exports=i=function(){function t(){}return t.thresholds={cool:{from:0,to:.75},warm:{from:.75,to:.9},hot:{from:.9,to:1}},t.getTimeArray=function(t,e){var r,i,s,n;for(null==e&&(e=25),n=[],r=i=0,s=e;s>=0?s>i:i>s;r=s>=0?++i:--i)n.unshift(this.getTimeObject(t--)),-1===t&&(t=23);return n},t.getTimeObject=function(t){switch(!1){case 0!==t:return{hour:12,period:"am",military:t};case!(12>t):return{hour:t,period:"am",military:t};case 12!==t:return{hour:12,period:"pm",military:t};case!(t>12):return{hour:t-12,period:"pm",military:t}}},t.getTemperature=function(t){switch(!1){case!(0>=t):return"wait";case!(t<this.thresholds.cool.to):return"cool";case!(t<this.thresholds.warm.to):return"warm";default:return"hot"}},t}()},{}],3:[function(t,e,r){e.exports=function(t){var e,r=[],i=t||{};return function(t,i,s){r.push('<div class="nanobox-dash-ui-hourly-average"><div class="component"></div><div class="controls"><select class="metrics">'),function(){var i=t;if("number"==typeof i.length)for(var s=0,n=i.length;n>s;s++){var o=i[s];r.push("<option"+jade.attr("value",o,!0,!1)+">"+jade.escape(null==(e=o)?"":e)+"</option>")}else{var n=0;for(var s in i){n++;var o=i[s];r.push("<option"+jade.attr("value",o,!0,!1)+">"+jade.escape(null==(e=o)?"":e)+"</option>")}}}.call(this),r.push('</select><div class="group"><span>last:</span><select class="periods">'),function(){var t=i;if("number"==typeof t.length)for(var s=0,n=t.length;n>s;s++){var o=t[s];r.push("<option"+jade.attr("value",o.value,!0,!1)+">"+jade.escape(null==(e=o.text)?"":e)+"</option>")}else{var n=0;for(var s in t){n++;var o=t[s];r.push("<option"+jade.attr("value",o.value,!0,!1)+">"+jade.escape(null==(e=o.text)?"":e)+"</option>")}}}.call(this),r.push("</select></div></div></div>")}.call(this,"metrics"in i?i.metrics:"undefined"!=typeof metrics?metrics:void 0,"periods"in i?i.periods:"undefined"!=typeof periods?periods:void 0,"undefined"in i?i.undefined:void 0),r.join("")}},{}]},{},[1]);